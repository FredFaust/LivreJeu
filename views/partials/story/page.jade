link(rel='stylesheet', href='/stylesheets/game.css')
link(rel='stylesheet', href='/stylesheets/adventure-sheet.css')

mixin storyLink(page, section)
  -var s = section ? ',' + section : '';
  -var clickStatement = 'goToPage(' + page + s + ')';
  a(href='', ng-click=clickStatement) Rendez-vous au #{page}.

// Dummy data, only for the first tps
-var hero = { name: 'Felix Le Vainqueur', ability: 10, endurance: 20, money: 10, equipment: [{ name: 'Marteau de guerre', file: 'warhammer.png' }, { name: 'Glaive', file: 'glaive.png' }, { name: 'Potion de Lampsur', file: 'lampsur.png' }], fights: [ { opponent: 'Le Seigneur de glaces', result: 'Victoire' }, { opponent: 'Dracula', result: 'Defaite' } ]};
-hero.specials = [{name : "Gilet de cuir matelasse", file: "quilted-vest.png"}];

if errorMessage
  #error-block
    p #{errorMessage}

#adventure-sheet
  h1.hero-name #[img(src='/images/hero.png')] {{info.player.name}}
  hr
  ul.attributes
    li Habilet&eacute; : {{info.progression.combatSkill}}
    li Endurance : {{info.progression.endurance}}
    li Pi&egrave;ces d'or : {{info.progression.money}}
  p Disciplines Kai :
    ul.disciplines
      li(ng-repeat='discipline in info.player.disciplines') {{$parent.disciplines[discipline]}}
  h2 #[img(src='/images/sword.png')] Derniers Combats #[img(src='/images/sword.png')]
  hr
  ol
    li(ng-repeat='fight in fights', ng-class="fight.result == 'Victoire' ? 'fight-victory' : 'fight-defeat'") {{fight.versus + ' - ' + fight.result}}
      img(ng-src="{{fight.result == 'Victoire' ? '/images/trophy.png' : '/images/skull.png'}}")

  img(src='/images/blood-splash.png')
  a.button.button-brown(href="", ng-click='showBackpackPrompt()') Sac &agrave; dos
  #backpack-modal.modal-dialog(ng-class="{'show-modal': prompt.showBackpack}")
    div
      a.modal-close(href="", title="Close", ng-click='hideBackpackPrompt()') X
      h2 Sac &agrave; dos
      table.tbl-backpack
        tr(ng-repeat='row in itemsTableArray')
          td(ng-repeat='item in row')
            img.img-table-backpack(src='{{item.src}}')
            p= '{{item.name}}'

  a#special-objects.button.button-brown(href="", ng-click='showSpecialObjectsPrompt()') Objets sp&eacute;ciaux
  #special-modal.modal-dialog(ng-class="{'show-modal': prompt.showSpecialObjects}")
    div
      a.modal-close(href="", title="Close", ng-click='hideSpecialObjectsPrompt()') X
      h2 Objets sp&eacute;ciaux
      table.tbl-backpack
        tr(ng-repeat='row in specialObjectsTableArray')
          td(ng-repeat='item in row')
            img.img-table-backpack(src='{{item.src}}')
            p= '{{item.name}}'

h1 Page ##{pageNumber}
block story
block prompt
block fight
